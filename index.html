<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web Bluetooth API Checker</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#000000;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;color:#e4e4e7;}
.container{background:rgba(30,30,40,0.95);border-radius:20px;padding:40px;max-width:600px;width:100%;text-align:center;transition:all 0.3s ease;}
h1{color:#f8fafc;margin-bottom:20px;font-size:2.2em;font-weight:300;}
.status{margin-bottom:30px;padding:20px;border-radius:15px;font-size:1.1em;font-weight:500;}
.status.success{background:linear-gradient(135deg,#065f46,#047857);color:#a7f3d0;border:2px solid #10b981;}
.status.error{background:linear-gradient(135deg,#7f1d1d,#991b1b);color:#fecaca;border:2px solid #ef4444;}
.status.warning{background:linear-gradient(135deg,#78350f,#92400e);color:#fed7aa;border:2px solid #f59e0b;}
.status.loading{background:linear-gradient(135deg,#374151,#4b5563);color:#d1d5db;border:2px solid #6b7280;}
.instructions{text-align:left;background:rgba(17,24,39,0.8);padding:25px;border-radius:15px;margin-top:20px;border-left:5px solid #6b7280;border:1px solid rgba(255,255,255,0.1);}
.instructions h3{color:#9ca3af;margin-bottom:15px;}
.instructions ol{margin-left:20px;line-height:1.8;}
.instructions li{margin-bottom:8px;color:#d1d5db;}
.code{background:#111827;color:#10b981;padding:10px;border-radius:8px;font-family:'Courier New',monospace;margin:10px 0;font-size:0.9em;border:1px solid rgba(255,255,255,0.1);}
.code-link{background:#111827;color:#6b7280;padding:8px 12px;border-radius:6px;font-family:'Courier New',monospace;font-size:0.9em;border:1px solid rgba(107,114,128,0.3);text-decoration:none;display:inline-block;transition:all 0.3s ease;margin:5px 0;cursor:pointer;user-select:all;position:relative;}
.code-link:hover{background:rgba(107,114,128,0.1);border-color:#6b7280;transform:translateY(-1px);}
.copy-success{background:rgba(16,185,129,0.1)!important;border-color:#10b981!important;color:#10b981!important;}
.note{background:rgba(75,85,99,0.2);padding:15px;border-radius:10px;margin-top:15px;border-left:4px solid #6b7280;color:#d1d5db;font-style:italic;border:1px solid rgba(107,114,128,0.2);}
.retry-btn{background:linear-gradient(135deg,#6b7280,#4b5563);color:white;border:none;padding:12px 30px;border-radius:25px;cursor:pointer;font-size:1em;font-weight:500;margin-top:20px;transition:all 0.3s ease;}
.retry-btn:hover{transform:translateY(-2px);}
@media(max-width:600px){.container{padding:30px 20px;}h1{font-size:1.8em;}.instructions ol{margin-left:15px;}}
</style>
</head>
<body>
<div class="container">
    <h1>Web Bluetooth API Checker</h1>
    <div id="status" class="status loading" style="display:none;">Checking Web Bluetooth API availability...</div>
    <div id="instructions" class="instructions" style="display:none;"></div>
    <button id="retry-btn" class="retry-btn" onclick="checkBluetoothSupport()" style="display:none;">üîÑ Check Again</button>
</div>

<script>
function getBrowserInfo(){
    const ua=navigator.userAgent, platform=navigator.platform;
    let browser='Unknown', version='', os='';
    if(platform.indexOf('Mac')!==-1)os='macOS';
    else if(platform.indexOf('Win')!==-1)os='Windows';
    else if(platform.indexOf('Linux')!==-1)os='Linux';
    else if(/Android/i.test(ua))os='Android';
    else if(/iPhone|iPad|iPod/i.test(ua))os='iOS';
    if(/Chrome/i.test(ua)&&!/Edge/i.test(ua)){browser='Chrome';version=ua.match(/Chrome\/([0-9]+)/)?.[1]||'';}
    else if(/Firefox/i.test(ua)){browser='Firefox';version=ua.match(/Firefox\/([0-9]+)/)?.[1]||'';}
    else if(/Safari/i.test(ua)&&!/Chrome/i.test(ua)){browser='Safari';version=ua.match(/Version\/([0-9]+)/)?.[1]||'';}
    else if(/Edge/i.test(ua)){browser='Edge';version=ua.match(/Edge\/([0-9]+)/)?.[1]||'';}
    else if(/Opera/i.test(ua)){browser='Opera';version=ua.match(/Opera\/([0-9]+)/)?.[1]||'';}
    return {browser,version,os,userAgent:ua};
}

function redirectToIndex(){ window.location.href='main.html'; }

function getInstructions(info){
    const {browser,os}=info;
    if(browser==='Chrome'||browser==='Edge'||browser==='Opera') return {
        title:'üîß Enable Web Bluetooth in Browser',
        steps:[
            'Copy this URL: <span class="code-link" onclick="copyToClipboard(\'chrome://flags/#brave-web-bluetooth-api\',this)">chrome://flags/#brave-web-bluetooth-api</span> and <strong>paste it directly into the address bar of a new tab</strong>. <em>Links cannot be opened by clicking.</em>'
        ],
        note:'Use HTTPS for Web Bluetooth to work.'
    };
    if(browser==='Firefox') return {title:'‚ö†Ô∏è Firefox Web Bluetooth Support',steps:[
        'Copy and paste <span class="code-link" onclick="copyToClipboard(\'about:config\',this)">about:config</span> into a new tab.',
        'Search for <span class="code">dom.bluetooth.webbluetooth.enabled</span> and set it to true.',
        'Restart Firefox.'
    ],note:'Support is limited; use Chrome/Edge/Opera for best experience.'};
    return {title:'‚ùì Unknown Browser',steps:['Try Chrome, Edge, Opera, or Firefox'],'note':'Use latest Chromium-based browser for best compatibility.'};
}

function displayInstructions(instr){ const div=document.getElementById('instructions'); div.innerHTML=`<h3>${instr.title}</h3><ol>${instr.steps.map(s=>`<li>${s}</li>`).join('')}</ol><div class="note"><strong>Note:</strong> ${instr.note}</div>`; div.style.display='block'; }

async function copyToClipboard(text,el){ try{ await navigator.clipboard.writeText(text); el.classList.add('copy-success'); const o=el.textContent; el.textContent='‚úì Copied!'; setTimeout(()=>{el.classList.remove('copy-success'); el.textContent=o;},2000);}catch{const t=document.createElement('textarea');t.value=text;document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);el.classList.add('copy-success');const o=el.textContent;el.textContent='‚úì Copied!';setTimeout(()=>{el.classList.remove('copy-success');el.textContent=o;},2000);}}

async function checkBluetoothSupport(){ const info=getBrowserInfo(); const status=document.getElementById('status'); const retry=document.getElementById('retry-btn'); const instructions=document.getElementById('instructions'); instructions.style.display='none'; retry.style.display='none'; status.style.display='none'; if('bluetooth' in navigator){try{ const avail=await navigator.bluetooth.getAvailability(); if(avail){ redirectToIndex(); return;} throw 'Disabled'; }catch{ status.style.display='block'; status.className='status warning'; status.innerHTML='‚ö†Ô∏è Web Bluetooth API exists but is not enabled'; displayInstructions(getInstructions(info)); retry.style.display='inline-block';}} else{ status.style.display='block'; status.className='status error'; status.innerHTML='‚ùå Web Bluetooth API not supported'; displayInstructions(getInstructions(info)); retry.style.display='inline-block'; }}

window.addEventListener('load',()=>{ checkBluetoothSupport(); });
</script>
</body>
</html>
